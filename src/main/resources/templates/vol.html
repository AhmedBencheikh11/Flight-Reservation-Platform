<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Vols</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/css/stylevol.css" rel="stylesheet">
    <link rel="stylesheet"
        th:href="@{https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css}">
</head>
<body>
<header class="banner">
    <div class="header-content">
        <img src="/images/logo.png" alt="Logo" class="logo">
        <h1 class="title">Explorez le monde avec nous</h1>
    </div>
    <nav class="navbar">
        <ul class="menu">
            <li><a th:href="@{/acceuil}"><i class="bi bi-house-door"></i> Accueil</a></li>
            <li><a th:href="@{/vol}"><i class="bi bi-airplane"></i> Vol</a></li>
            <li><a th:href="@{/contact}"><i class="bi bi-telephone"></i> Contactez-nous</a></li>
            <!-- Removed À propos -->
            <li><a th:href="@{/userspace}"><i class="bi bi-person-fill"></i></a></li>
        </ul>
    </nav>
</header>

<main>
    <!-- Flash messages -->
    <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
    <div th:if="${errorMessage}"   class="alert alert-danger"  th:text="${errorMessage}"></div>

    <!-- Admin-only "Add" button -->
    <div class="add-button-container" th:if="${isAdmin}">
        <a href="/vol/add" class="btn-add">➕ Nouveau vol</a>
    </div>

    <div class="flights-container">
        <div class="flight-card" th:each="vol : ${vols}">
            <img src="/images/image1.png" alt="Vol" class="flight-img">
            <div class="flight-info">
                <h3 th:text="${vol.destination}">Destination</h3>
                <p th:text="'Date: ' + ${vol.dateVol}">Date</p>
                <p th:text="'Départ: ' + ${vol.tempsDepart}">Heure de départ</p>
                <p th:text="'Durée: ' + ${vol.dureeVoyage}">Durée</p>
                <p th:text="'Places dispo: ' + ${vol.nbPlaces}">Places</p>
                <p th:text="${vol.description}">Description</p>
                <p th:text="'Prix: ' + ${vol.prix} + ' TND'">Prix</p>

                <!-- Réserver button -->
                <div class="reservation-action">
                    <a th:href="@{/vol/reservation(volId=${vol.id_vol})}" class="btn-reserver">
                        ✈️ Réserver
                    </a>
                </div>

                <!-- Admin-only actions -->
                <div class="actions" th:if="${isAdmin}">
                    <a th:href="@{|/vol/edit/${vol.id_vol}|}" class="btn-edit">✏️ Modifier</a>
                    <form th:action="@{|/vol/delete/${vol.id_vol}|}" method="post"
                          onsubmit="return confirm('Supprimer ce vol ?');" style="display:inline;">
                        <button type="submit" class="btn-delete">🗑️ Supprimer</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>

<footer class="footer">
    <p>📧 contact@agencevoyage.tn | ☎️ +216 99 999 999</p>
    <p>📍 Rue exemple, Bizerte, Tunisie</p>
</footer>
</body>
</html>
